module Stroma
  module Hooks
    class Applier
      @target_class: Class
      @hooks: Collection
      @matrix: Matrix

      def self.apply!: (Class target_class, Collection hooks, Matrix matrix) -> void

      # Class-level tower cache (private class method)
      def self.tower_cache: () -> Hash[Array[untyped], Module]

      def initialize: (Class target_class, Collection hooks, Matrix matrix) -> void

      def apply!: () -> void

      private

      def fetch_or_build_tower: (Entry entry, Array[Wrap] wraps) -> Module

      def build_tower: (Entry entry, Array[Wrap] wraps) -> Module
    end
  end
end
